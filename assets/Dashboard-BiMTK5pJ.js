import{j as e}from"./ui-CIANOcUa.js";import{a as o,i as H}from"./vendor-Di3rkBj0.js";import{x as n,y as i,z as r,u as M,J as l,A as m,D as N,C as E,O as x,M as I,w as p,_ as f}from"./index-C4XDO3q4.js";import{C as b}from"./clipboard-list-BtdI681t.js";import{M as O}from"./message-square-GFvM-YOK.js";import{A as F}from"./activity-UtemIk9I.js";import{P as G}from"./plus-CeiqPXVg.js";const te=()=>{const[h,R]=o.useState({members:0,donations:0,donationAmount:0,events:0,appointments:0,testimonials:0}),[j,v]=o.useState(!0),[u,w]=o.useState(!0),[y,A]=o.useState([]),[C,k]=o.useState([]),[S,D]=o.useState([]),[U,L]=o.useState(0),t=H();return o.useEffect(()=>{(async()=>{v(!0);const[{count:a},{count:c},{data:d=[]},{count:g},{count:_},{count:P}]=await Promise.all([p.from("members").select("id",{count:"exact",head:!0}),p.from("donations").select("id",{count:"exact",head:!0}),p.from("donations").select("amount"),p.from("events").select("id",{count:"exact",head:!0}),p.from("appointments").select("id",{count:"exact",head:!0}),p.from("profiles").select("id",{count:"exact",head:!0})]),V=a??0,$=c??0,q=g??0,B=_??0,J=P??0,Q=Array.isArray(d)?d.reduce((T,z)=>T+(z.amount||0),0):0;R({members:V,donations:$,donationAmount:Q,events:q,appointments:B,testimonials:J}),v(!1)})()},[]),o.useEffect(()=>{(async()=>{try{w(!0);const[a,c,d,g]=await Promise.all([f.events.getUpcomingEvents(),f.donations.getDonations(),f.members.getMembers(),f.appointments.getAppointmentsByStatus("pending")]);A(Array.isArray(a)?a.slice(0,5):[]),k(Array.isArray(c)?c.slice(0,5):[]),D(Array.isArray(d)?d.slice(0,5):[]),L(Array.isArray(g)?g.length:0)}catch(a){console.error("Error loading dashboard lists:",a),A([]),k([]),D([]),L(0)}finally{w(!1)}})()},[]),e.jsxs("div",{className:"space-y-6",role:"main","aria-label":"Admin Dashboard Main Content",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-church-burgundy",tabIndex:-1,id:"dashboard-title",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Quick overview of your church management system"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(n,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/admin/members"),children:[e.jsx(i,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-church-burgundy"})," Members"]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:j?"-":h.members}),e.jsx(m,{children:"Total registered members"})]})]}),e.jsxs(n,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/admin/donations"),children:[e.jsx(i,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-green-600"})," Donations"]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:j?"-":`$${h.donationAmount.toLocaleString()}`}),e.jsx(m,{children:j?"-":`${h.donations} donations received`})]})]}),e.jsxs(n,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/admin/events"),children:[e.jsx(i,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-blue-600"})," Events"]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:j?"-":h.events}),e.jsx(m,{children:"Upcoming and past events"})]})]}),e.jsxs(n,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/admin/appointments"),children:[e.jsx(i,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-yellow-600"})," Appointments"]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:j?"-":h.appointments}),e.jsx(m,{children:"Service appointment requests"})]})]}),e.jsxs(n,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/admin/users"),children:[e.jsx(i,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-purple-600"})," Users"]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:j?"-":h.testimonials}),e.jsx(m,{children:"Users"})]})]})]}),e.jsxs(n,{children:[e.jsx(i,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-church-burgundy"})," Quick Actions"]})}),e.jsxs(l,{className:"flex flex-wrap gap-3",children:[e.jsxs(x,{variant:"default",onClick:()=>t("/admin/events"),children:[e.jsx(G,{className:"h-4 w-4 mr-2"})," Create / Manage Events"]}),e.jsxs(x,{variant:"outline",onClick:()=>t("/admin/appointments"),children:[e.jsx(b,{className:"h-4 w-4 mr-2"})," Review Appointments"]}),e.jsxs(x,{variant:"outline",onClick:()=>t("/admin/donations"),children:[e.jsx(N,{className:"h-4 w-4 mr-2"})," View Donations"]}),e.jsxs(x,{variant:"outline",onClick:()=>t("/admin/email-marketing"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Email Marketing"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:[e.jsxs(n,{className:"h-full",children:[e.jsxs(i,{className:"pb-2",children:[e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-blue-600"})," Upcoming Events"]}),e.jsx(m,{children:"Next scheduled church activities"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[u?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading events…"}):y.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No upcoming events"}):y.map((s,a)=>e.jsx("div",{className:"flex items-center justify-between border-b last:border-0 pb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),s.event_date&&e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.event_date).toLocaleDateString()})]})},a)),e.jsx("div",{className:"pt-2",children:e.jsx(x,{variant:"link",onClick:()=>t("/admin/events"),children:"View all events"})})]})})]}),e.jsxs(n,{className:"h-full",children:[e.jsxs(i,{className:"pb-2",children:[e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-green-600"})," Recent Donations"]}),e.jsx(m,{children:"Latest contributions"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[u?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading donations…"}):C.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No recent donations"}):C.map((s,a)=>{var c,d;return e.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 pb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:["$",((d=(c=s.amount)==null?void 0:c.toLocaleString)==null?void 0:d.call(c))||s.amount]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleString()})]}),e.jsx("span",{className:"text-xs uppercase text-gray-600",children:s.status||"completed"})]},a)}),e.jsx("div",{className:"pt-2",children:e.jsx(x,{variant:"link",onClick:()=>t("/admin/donations"),children:"View all donations"})})]})})]}),e.jsxs(n,{className:"h-full",children:[e.jsxs(i,{className:"pb-2",children:[e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-church-burgundy"})," Recent Members"]}),e.jsx(m,{children:"Latest registrations"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[u?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading members…"}):S.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No recent members"}):S.map((s,a)=>e.jsx("div",{className:"flex items-center justify-between border-b last:border-0 pb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.full_name||s.email||"Member"}),s.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",new Date(s.created_at).toLocaleDateString()]})]})},a)),e.jsx("div",{className:"pt-2",children:e.jsx(x,{variant:"link",onClick:()=>t("/admin/members"),children:"View all members"})})]})})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(r,{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-yellow-600"})," Pending Appointments"]}),e.jsx(x,{variant:"outline",onClick:()=>t("/admin/appointments"),children:"Manage"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:u?"-":U}),e.jsx(m,{children:"Awaiting review"})]})]})]})};export{te as default};
